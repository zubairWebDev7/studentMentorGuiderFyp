{"version":3,"file":"ibm.d.ts","names":["AIMessageChunk","BaseMessage","BaseLanguageModelInput","StructuredOutputMethodOptions","CallbackManagerForLLMRun","BaseChatModel","BindToolsInput","LangSmithParams","BaseChatModelParams","ChatGenerationChunk","ChatResult","DeploymentsTextChatParams","RequestCallbacks","TextChatParameterTools","TextChatParams","TextChatResponseFormat","TextChatToolCall","WatsonXAI","Runnable","InteropZodType","ChatsRequestTool","CreateChatCompletionsParams","Gateway","WatsonxAuth","XOR","WatsonxBaseChatParams","WatsonxCallParams","WatsonxCallOptionsChat","WatsonxCallDeployedParams","WatsonxDeltaStream","Omit","Partial","WatsonxProjectSpaceParams","WatsonxCallOptionsDeployedChat","WatsonxDeployedParams","WatsonxGatewayChatKwargs","WatsonxCallOptionsGatewayChat","WatsonxGatewayChatParams","ChatWatsonxInput","ChatWatsonxDeployedInput","ChatWatsonxGatewayInput","ChatWatsonxConstructor","ChatWatsonxToolType","ChatWatsonxConstructorInput","ChatWatsonxCallOptions","ChatWatsonx","T","RunOutput","CallOptions","NonNullable","Promise","AsyncGenerator","Record"],"sources":["../../src/chat_models/ibm.d.ts"],"sourcesContent":["import { AIMessageChunk, type BaseMessage } from \"@langchain/core/messages\";\nimport { BaseLanguageModelInput, StructuredOutputMethodOptions } from \"@langchain/core/language_models/base\";\nimport { CallbackManagerForLLMRun } from \"@langchain/core/callbacks/manager\";\nimport { BaseChatModel, BindToolsInput, LangSmithParams, type BaseChatModelParams } from \"@langchain/core/language_models/chat_models\";\nimport { ChatGenerationChunk, ChatResult } from \"@langchain/core/outputs\";\nimport { DeploymentsTextChatParams, RequestCallbacks, TextChatParameterTools, TextChatParams, TextChatResponseFormat, TextChatToolCall } from \"@ibm-cloud/watsonx-ai/dist/watsonx-ai-ml/vml_v1.js\";\nimport { WatsonXAI } from \"@ibm-cloud/watsonx-ai\";\nimport { Runnable } from \"@langchain/core/runnables\";\nimport { InteropZodType } from \"@langchain/core/utils/types\";\nimport { ChatsRequestTool, CreateChatCompletionsParams, Gateway } from \"@ibm-cloud/watsonx-ai/gateway\";\nimport { WatsonxAuth, XOR, WatsonxBaseChatParams } from \"../types/ibm.js\";\nexport interface WatsonxCallParams extends WatsonxCallOptionsChat {\n}\nexport interface WatsonxCallDeployedParams extends DeploymentsTextChatParams {\n}\nexport interface WatsonxDeltaStream {\n    role?: string;\n    content?: string;\n    tool_calls?: TextChatToolCall[];\n    refusal?: string;\n}\n/** Project/space params */\nexport interface WatsonxCallOptionsChat extends Partial<Omit<TextChatParams, \"modelId\" | \"toolChoice\" | \"messages\">>, WatsonxBaseChatParams {\n    model?: string;\n}\nexport interface WatsonxProjectSpaceParams extends WatsonxCallOptionsChat {\n    model: string;\n    serviceUrl: string;\n    version: string;\n}\n/** Deployed params */\nexport interface WatsonxCallOptionsDeployedChat extends Partial<Omit<DeploymentsTextChatParams, \"messages\">>, WatsonxBaseChatParams {\n}\nexport interface WatsonxDeployedParams extends WatsonxCallOptionsDeployedChat {\n    serviceUrl: string;\n    version: string;\n}\n/** Gateway params */\nexport interface WatsonxGatewayChatKwargs extends Omit<CreateChatCompletionsParams, keyof TextChatParams | \"model\" | \"stream\" | \"messages\"> {\n}\nexport interface WatsonxCallOptionsGatewayChat extends Omit<CreateChatCompletionsParams, \"stream\" | \"toolChoice\" | \"messages\" | \"prompt\" | keyof WatsonxGatewayChatKwargs>, WatsonxBaseChatParams {\n    /** Additional parameters usable only in model gateway */\n    modelGatewayKwargs?: WatsonxGatewayChatKwargs;\n}\nexport interface WatsonxGatewayChatParams extends WatsonxCallOptionsGatewayChat {\n    serviceUrl: string;\n    version: string;\n}\nexport interface ChatWatsonxInput extends BaseChatModelParams, WatsonxProjectSpaceParams {\n}\nexport interface ChatWatsonxDeployedInput extends BaseChatModelParams, WatsonxDeployedParams {\n}\nexport interface ChatWatsonxGatewayInput extends BaseChatModelParams, WatsonxGatewayChatParams {\n    /** Flag indicating weather to use Model Gateway or no */\n    modelGateway: boolean;\n}\nexport type ChatWatsonxConstructor = BaseChatModelParams & Partial<WatsonxBaseChatParams> & WatsonxDeployedParams & WatsonxCallParams & WatsonxDeployedParams;\ntype ChatWatsonxToolType = BindToolsInput | TextChatParameterTools | ChatsRequestTool;\nexport type ChatWatsonxConstructorInput = XOR<XOR<ChatWatsonxInput, ChatWatsonxDeployedInput>, ChatWatsonxGatewayInput> & WatsonxAuth;\nexport type ChatWatsonxCallOptions = XOR<XOR<WatsonxCallOptionsChat, WatsonxCallOptionsDeployedChat>, WatsonxCallOptionsGatewayChat>;\nexport declare class ChatWatsonx<CallOptions extends ChatWatsonxCallOptions = ChatWatsonxCallOptions> extends BaseChatModel<CallOptions> implements ChatWatsonxConstructor {\n    static lc_name(): string;\n    lc_serializable: boolean;\n    get lc_secrets(): {\n        [key: string]: string;\n    };\n    get lc_aliases(): {\n        [key: string]: string;\n    };\n    getLsParams(options: this[\"ParsedCallOptions\"]): LangSmithParams;\n    private checkValidProperties;\n    protected service?: WatsonXAI;\n    protected gateway?: Gateway;\n    model?: string;\n    version: string;\n    modelGateway: boolean;\n    maxTokens?: number;\n    maxCompletionTokens?: number;\n    maxRetries: number;\n    serviceUrl: string;\n    spaceId?: string;\n    projectId?: string;\n    idOrName?: string;\n    frequencyPenalty?: number;\n    logprobs?: boolean;\n    topLogprobs?: number;\n    n?: number;\n    presencePenalty?: number;\n    temperature?: number;\n    topP?: number;\n    timeLimit?: number;\n    includeReasoning?: boolean;\n    reasoningEffort?: \"low\" | \"medium\" | \"high\";\n    maxConcurrency?: number;\n    responseFormat?: TextChatResponseFormat;\n    streaming: boolean;\n    modelGatewayKwargs?: WatsonxGatewayChatKwargs;\n    watsonxCallbacks?: RequestCallbacks;\n    constructor(fields: ChatWatsonxConstructorInput);\n    _llmType(): string;\n    invocationParams(options: this[\"ParsedCallOptions\"]): {\n        maxTokens: number | undefined;\n        maxCompletionTokens: number | undefined;\n        temperature: number | undefined;\n        topP: number | undefined;\n        presencePenalty: number | undefined;\n        n: number | undefined;\n        topLogprobs: number | undefined;\n        logprobs: boolean | NonNullable<CallOptions[\"logprobs\"]> | undefined;\n        frequencyPenalty: number | undefined;\n        reasoningEffort: \"high\" | \"low\" | \"medium\" | NonNullable<CallOptions[\"reasoningEffort\"]> | undefined;\n        responseFormat: CallOptions[\"responseFormat\"] | undefined;\n    };\n    invocationCallbacks(options: this[\"ParsedCallOptions\"]): RequestCallbacks<any> | undefined;\n    bindTools(tools: ChatWatsonxToolType[], kwargs?: Partial<CallOptions>): Runnable<BaseLanguageModelInput, AIMessageChunk, CallOptions>;\n    scopeId(options?: this[\"ParsedCallOptions\"]): {\n        idOrName: string;\n    } | {\n        projectId: string;\n        modelId: string;\n    } | {\n        spaceId: string;\n        modelId: string;\n    } | {\n        modelId: string;\n    } | {\n        model: string;\n    };\n    completionWithRetry<T>(callback: () => T, options?: this[\"ParsedCallOptions\"]): Promise<T>;\n    private _chatModelGateway;\n    _generate(messages: BaseMessage[], options: this[\"ParsedCallOptions\"], runManager?: CallbackManagerForLLMRun): Promise<ChatResult>;\n    _streamResponseChunks(messages: BaseMessage[], options: this[\"ParsedCallOptions\"], _runManager?: CallbackManagerForLLMRun): AsyncGenerator<ChatGenerationChunk>;\n    /** @ignore */\n    _combineLLMOutput(): never[];\n    withStructuredOutput<RunOutput extends Record<string, any> = Record<string, any>>(outputSchema: InteropZodType<RunOutput> | Record<string, any>, config?: StructuredOutputMethodOptions<false>): Runnable<BaseLanguageModelInput, RunOutput>;\n    withStructuredOutput<RunOutput extends Record<string, any> = Record<string, any>>(outputSchema: InteropZodType<RunOutput> | Record<string, any>, config?: StructuredOutputMethodOptions<true>): Runnable<BaseLanguageModelInput, {\n        raw: BaseMessage;\n        parsed: RunOutput;\n    }>;\n}\nexport {};\n//# sourceMappingURL=ibm.d.ts.map"],"mappings":"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"}