{"version":3,"file":"couchbase_query.d.ts","names":["EmbeddingsInterface","VectorStore","Cluster","Document","DistanceStrategy","IndexType","CreateIndexOptions","AddVectorOptions","Record","CouchbaseQueryVectorStoreArgs","CouchbaseQueryVectorStoreFilter","CouchbaseQueryVectorStore","Promise"],"sources":["../../src/vectorstores/couchbase_query.d.ts"],"sourcesContent":["import { EmbeddingsInterface } from \"@langchain/core/embeddings\";\nimport { VectorStore } from \"@langchain/core/vectorstores\";\nimport { Cluster } from \"couchbase\";\nimport { Document } from \"@langchain/core/documents\";\n/**\n * Enum for different distance strategies supported by Couchbase vector search\n */\nexport declare enum DistanceStrategy {\n    DOT = \"dot\",\n    COSINE = \"cosine\",\n    EUCLIDEAN = \"euclidean\",\n    EUCLIDEAN_SQUARED = \"euclidean_squared\"\n}\nexport declare enum IndexType {\n    COMPOSITE = \"composite\",\n    HYPERSCALE = \"hyperscale\"\n}\n/**\n * Interface for create_index method parameters\n */\nexport interface CreateIndexOptions {\n    indexType: IndexType;\n    indexDescription: string;\n    distanceMetric?: DistanceStrategy;\n    indexName?: string;\n    vectorField?: string;\n    vectorDimension?: number;\n    fields?: string[];\n    whereClause?: string;\n    indexScanNprobes?: number;\n    indexTrainlist?: number;\n}\n/**\n * This interface define the optional fields for adding vector\n * - `ids` - vector of ids for each document. If undefined, then uuid will be used\n * - `metadata` - vector of metadata object for each document\n */\nexport interface AddVectorOptions {\n    ids?: string[];\n    metadata?: Record<string, any>[];\n}\n/**\n * This interface defines the fields required to initialize a query vector store\n * These are the fields part of config:\n * @property {Cluster} cluster - The Couchbase cluster that the store will interact with.\n * @property {string} bucketName - The name of the bucket in the Couchbase cluster.\n * @property {string} scopeName - The name of the scope within the bucket.\n * @property {string} collectionName - The name of the collection within the scope.\n * @property {string} textKey - The key to be used for text in the documents. Defaults to \"text\".\n * @property {string} embeddingKey - The key to be used for embeddings in the documents. Defaults to \"embedding\".\n * @property {DistanceStrategy} distanceStrategy - The distance strategy to use for vector similarity calculations. Defaults to DOT.\n * @property {AddVectorOptions} addVectorOptions - Options for adding vectors with specific id/metadata\n */\nexport interface CouchbaseQueryVectorStoreArgs {\n    cluster: Cluster;\n    bucketName: string;\n    scopeName: string;\n    collectionName: string;\n    textKey?: string;\n    embeddingKey?: string;\n    distanceStrategy?: DistanceStrategy;\n    addVectorOptions?: AddVectorOptions;\n}\n/**\n * This type defines the search filters used in couchbase query vector search\n * - `where`: Optional WHERE clause conditions for the SQL++ query\n * - `fields`: Optional list of fields to include in the results\n */\ntype CouchbaseQueryVectorStoreFilter = {\n    where?: string;\n    fields?: string[];\n};\n/**\n * Class for interacting with the Couchbase database using Query service for vector search.\n * It extends the VectorStore class and provides methods for adding vectors and\n * documents, and searching for similar vectors using SQL++ queries.\n * Initiate the class using initialize() method.\n */\nexport declare class CouchbaseQueryVectorStore extends VectorStore {\n    FilterType: CouchbaseQueryVectorStoreFilter;\n    private metadataKey;\n    private readonly defaultTextKey;\n    private readonly defaultEmbeddingKey;\n    private readonly defaultDistanceStrategy;\n    private cluster;\n    private _bucket;\n    private _scope;\n    private _collection;\n    private bucketName;\n    private scopeName;\n    private collectionName;\n    private textKey;\n    private embeddingKey;\n    private distanceStrategy;\n    /**\n     * The private constructor used to provide embedding to parent class.\n     * Initialize the class using static initialize() method\n     * @param embedding - object to generate embedding\n     * @param config -  the fields required to initialize a vector store\n     */\n    private constructor();\n    _vectorstoreType(): string;\n    /**\n     * initialize class for interacting with the Couchbase database using Query service.\n     * It extends the VectorStore class and provides methods\n     * for adding vectors and documents, and searching for similar vectors.\n     * This also verifies the params\n     *\n     * @param embeddings - object to generate embedding\n     * @param config - the fields required to initialize a vector store\n     */\n    static initialize(embeddings: EmbeddingsInterface, config: CouchbaseQueryVectorStoreArgs): Promise<CouchbaseQueryVectorStore>;\n    private checkBucketExists;\n    private checkScopeAndCollectionExists;\n    /**\n     * Method to add vectors and documents to the vector store.\n     *\n     * @param vectors - Vectors to be added to the vector store.\n     * @param documents - Documents to be added to the vector store.\n     * @param options - Optional parameters for adding vectors.\n     *\n     * @returns - Promise that resolves to an array of document IDs.\n     */\n    addVectors(vectors: number[][], documents: Document[], options?: AddVectorOptions): Promise<string[]>;\n    /**\n     * Method to add documents to the vector store. It first converts\n     * the documents to vectors using the embeddings and then adds them to the vector store.\n     *\n     * @param documents - Documents to be added to the vector store.\n     * @param options - Optional parameters for adding documents.\n     *\n     * @returns - Promise that resolves to an array of document IDs.\n     */\n    addDocuments(documents: Document[], options?: AddVectorOptions): Promise<string[]>;\n    /**\n     * Method to delete documents from the vector store.\n     *\n     * @param ids - Array of document IDs to be deleted.\n     *\n     * @returns - Promise that resolves when the deletion is complete.\n     */\n    delete(options: {\n        ids: string[];\n    }): Promise<void>;\n    /**\n     * Return documents that are most similar to the vector embedding using SQL++ query.\n     *\n     * @param queryEmbeddings - Embedding vector to look up documents similar to.\n     * @param k - Number of documents to return. Defaults to 4.\n     * @param filter - Optional search filter that are passed to Couchbase query. Defaults to empty object.\n     * - `where`: Optional WHERE clause conditions for the SQL++ query\n     * - `fields`: Optional list of fields to include in the results\n     *\n     * @returns - Promise of list of [document, score] that are the most similar to the query vector.\n     *\n     * @throws If the search operation fails.\n     */\n    similaritySearchVectorWithScore(queryEmbeddings: number[], k?: number, filter?: CouchbaseQueryVectorStoreFilter): Promise<[Document, number][]>;\n    /**\n     * Return documents that are most similar to the vector embedding.\n     *\n     * @param queryEmbeddings - Embedding to look up documents similar to.\n     * @param k - The number of similar documents to return. Defaults to 4.\n     * @param filter - Optional search filter that are passed to Couchbase query. Defaults to empty object.\n     * - `where`: Optional WHERE clause conditions for the SQL++ query\n     * - `fields`: Optional list of fields to include in the results\n     *\n     * @returns - A promise that resolves to an array of documents that match the similarity search.\n     */\n    similaritySearchByVector(queryEmbeddings: number[], k?: number, filter?: CouchbaseQueryVectorStoreFilter): Promise<Document[]>;\n    /**\n     * Return documents that are most similar to the query.\n     *\n     * @param query - Query to look up for similar documents\n     * @param k - The number of similar documents to return. Defaults to 4.\n     * @param filter - Optional search filter that are passed to Couchbase query. Defaults to empty object.\n     * - `where`: Optional WHERE clause conditions for the SQL++ query\n     * - `fields`: Optional list of fields to include in the results\n     *\n     * @returns - Promise of list of documents that are most similar to the query.\n     */\n    similaritySearch(query: string, k?: number, filter?: CouchbaseQueryVectorStoreFilter): Promise<Document[]>;\n    /**\n     * Return documents that are most similar to the query with their scores.\n     *\n     * @param query - Query to look up for similar documents\n     * @param k - The number of similar documents to return. Defaults to 4.\n     * @param filter - Optional search filter that are passed to Couchbase query. Defaults to empty object.\n     * - `where`: Optional WHERE clause conditions for the SQL++ query\n     * - `fields`: Optional list of fields to include in the results\n     *\n     * @returns - Promise of list of documents that are most similar to the query.\n     */\n    similaritySearchWithScore(query: string, k?: number, filter?: CouchbaseQueryVectorStoreFilter): Promise<[Document, number][]>;\n    private upsertDocuments;\n    /**\n     * Create a new vector index for the Query vector store.\n     *\n     * @param options - Configuration options for creating the index\n     * @param options.indexType - Type of the index (HYPERSCALE or COMPOSITE) to create\n     * @param options.indexDescription - Description of the index like \"IVF,SQ8\"\n     * @param options.distanceMetric - Distance metric to use for the index. Defaults to the distance metric in the constructor\n     * @param options.indexName - Name of the index to create. Defaults to \"langchain_{indexType}_query_index\"\n     * @param options.vectorField - Name of the vector field to use for the index. Defaults to the embedding key in the constructor\n     * @param options.vectorDimension - Dimension of the vector field. If not provided, it will be determined from the embedding object\n     * @param options.fields - List of fields to include in the index. Defaults to the text field in the constructor\n     * @param options.whereClause - Optional where clause to filter the documents to index\n     * @param options.indexScanNprobes - Number of probes to use for the index\n     * @param options.indexTrainlist - Number of training samples to use for the index\n     *\n     * @throws {Error} If index creation fails or invalid parameters are provided\n     */\n    createIndex(options: CreateIndexOptions): Promise<void>;\n    /**\n     * Static method to create a new CouchbaseQueryVectorStore from an array of texts.\n     * It first converts the texts to vectors using the embeddings and then creates a new vector store.\n     *\n     * @param texts - Array of texts to be converted to vectors.\n     * @param metadatas - Array of metadata objects corresponding to the texts.\n     * @param embeddings - Embeddings to be used for converting texts to vectors.\n     * @param config - Configuration for the vector store.\n     *\n     * @returns - Promise that resolves to a new CouchbaseQueryVectorStore instance.\n     */\n    static fromTexts(texts: string[], metadatas: object[] | object, embeddings: EmbeddingsInterface, config: CouchbaseQueryVectorStoreArgs): Promise<CouchbaseQueryVectorStore>;\n    /**\n     * Static method to create a new CouchbaseQueryVectorStore from an array of documents.\n     * It first converts the documents to vectors using the embeddings and then creates a new vector store.\n     *\n     * @param docs - Array of documents to be converted to vectors.\n     * @param embeddings - Embeddings to be used for converting documents to vectors.\n     * @param config - Configuration for the vector store.\n     *\n     * @returns - Promise that resolves to a new CouchbaseQueryVectorStore instance.\n     */\n    static fromDocuments(docs: Document[], embeddings: EmbeddingsInterface, config: CouchbaseQueryVectorStoreArgs): Promise<CouchbaseQueryVectorStore>;\n}\nexport {};\n//# sourceMappingURL=couchbase_query.d.ts.map"],"mappings":";;;;;;;;;AAOA;AAMoBK,aANAD,gBAAAA;EAaHE,GAAAA,GAAAA,KAAAA;EAiBAC,MAAAA,GAAAA,QAAAA;EAgBAE,SAAAA,GAAAA,WAAAA;EACJP,iBAAAA,GAAAA,mBAAAA;;AAOUK,aAhDHF,SAAAA;EAgDmB,SAAA,GAAA,WAAA;EAOlCK,UAAAA,GAAAA,YAAAA;AAUL;;;;AAiCuGC,UA3FtFL,kBAAAA,CA2FsFK;EAARC,SAAAA,EA1FhFP,SA0FgFO;EAYhDT,gBAAAA,EAAAA,MAAAA;EAAsBI,cAAAA,CAAAA,EApGhDH,gBAoGgDG;EAAmBK,SAAAA,CAAAA,EAAAA,MAAAA;EAU5DT,WAAAA,CAAAA,EAAAA,MAAAA;EAAsBI,eAAAA,CAAAA,EAAAA,MAAAA;EAAmBK,MAAAA,CAAAA,EAAAA,MAAAA,EAAAA;EAU7DA,WAAAA,CAAAA,EAAAA,MAAAA;EAc4EF,gBAAAA,CAAAA,EAAAA,MAAAA;EAA2CP,cAAAA,CAAAA,EAAAA,MAAAA;;;;;;;AAwBpCS,UAhJ1EL,gBAAAA,CAgJ0EK;EAYzBF,GAAAA,CAAAA,EAAAA,MAAAA,EAAAA;EAA2CP,QAAAA,CAAAA,EA1J9FK,MA0J8FL,CAAAA,MAAAA,EAAAA,GAAAA,CAAAA,EAAAA;;;;;;;;;;;;;;AAnH3C,UAzBjDM,6BAAAA,CAyBiD;WAxBrDP;;;;;;qBAMUE;qBACAG;;;;;;;KAOlBG,+BAAAA;;;;;;;;;;cAUgBC,yBAAAA,SAAkCV,WAAAA;cACvCS;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;gCAgCkBV,6BAA6BS,gCAAgCG,QAAQD;;;;;;;;;;;;6CAYxDR,sBAAsBI,mBAAmBK;;;;;;;;;;0BAU5DT,sBAAsBI,mBAAmBK;;;;;;;;;;MAU7DA;;;;;;;;;;;;;;kFAc4EF,kCAAkCE,SAAST;;;;;;;;;;;;2EAYlDO,kCAAkCE,QAAQT;;;;;;;;;;;;uDAY9DO,kCAAkCE,QAAQT;;;;;;;;;;;;gEAYjCO,kCAAkCE,SAAST;;;;;;;;;;;;;;;;;;;uBAmBpFG,qBAAqBM;;;;;;;;;;;;8EAYkCZ,6BAA6BS,gCAAgCG,QAAQD;;;;;;;;;;;6BAWtHR,wBAAwBH,6BAA6BS,gCAAgCG,QAAQD"}