{"version":3,"file":"convex.d.cts","names":["DocumentByName","FieldPaths","FunctionReference","GenericActionCtx","GenericDataModel","NamedTableInfo","TableNamesInDataModel","IndexNames","BaseListChatMessageHistory","BaseMessage","ConvexChatMessageHistoryInput","DataModel","TableName","IndexName","SessionIdFieldName","MessageTextFieldName","InsertMutation","LookupQuery","DeleteManyMutation","ConvexChatMessageHistory","Promise"],"sources":["../../../src/stores/message/convex.d.ts"],"sourcesContent":["import { DocumentByName, FieldPaths, FunctionReference, GenericActionCtx, GenericDataModel, NamedTableInfo, TableNamesInDataModel, IndexNames } from \"convex/server\";\nimport { BaseListChatMessageHistory } from \"@langchain/core/chat_history\";\nimport { BaseMessage } from \"@langchain/core/messages\";\n/**\n * Type that defines the config required to initialize the\n * ConvexChatMessageHistory class. At minimum it needs a sessionId\n * and an ActionCtx.\n */\nexport type ConvexChatMessageHistoryInput<DataModel extends GenericDataModel, TableName extends TableNamesInDataModel<DataModel> = \"messages\", IndexName extends IndexNames<NamedTableInfo<DataModel, TableName>> = \"bySessionId\", SessionIdFieldName extends FieldPaths<NamedTableInfo<DataModel, TableName>> = \"sessionId\", MessageTextFieldName extends FieldPaths<NamedTableInfo<DataModel, TableName>> = \"message\", InsertMutation extends FunctionReference<\"mutation\", \"internal\", {\n    table: string;\n    document: object;\n}> = any, LookupQuery extends FunctionReference<\"query\", \"internal\", {\n    table: string;\n    index: string;\n    keyField: string;\n    key: string;\n}, object[]> = any, DeleteManyMutation extends FunctionReference<\"mutation\", \"internal\", {\n    table: string;\n    index: string;\n    keyField: string;\n    key: string;\n}> = any> = {\n    readonly ctx: GenericActionCtx<DataModel>;\n    readonly sessionId: DocumentByName<DataModel, TableName>[SessionIdFieldName];\n    /**\n     * Defaults to \"messages\"\n     */\n    readonly table?: TableName;\n    /**\n     * Defaults to \"bySessionId\"\n     */\n    readonly index?: IndexName;\n    /**\n     * Defaults to \"sessionId\"\n     */\n    readonly sessionIdField?: SessionIdFieldName;\n    /**\n     * Defaults to \"message\"\n     */\n    readonly messageTextFieldName?: MessageTextFieldName;\n    /**\n     * Defaults to `internal.langchain.db.insert`\n     */\n    readonly insert?: InsertMutation;\n    /**\n     * Defaults to `internal.langchain.db.lookup`\n     */\n    readonly lookup?: LookupQuery;\n    /**\n     * Defaults to `internal.langchain.db.deleteMany`\n     */\n    readonly deleteMany?: DeleteManyMutation;\n};\nexport declare class ConvexChatMessageHistory<DataModel extends GenericDataModel, SessionIdFieldName extends FieldPaths<NamedTableInfo<DataModel, TableName>> = \"sessionId\", TableName extends TableNamesInDataModel<DataModel> = \"messages\", IndexName extends IndexNames<NamedTableInfo<DataModel, TableName>> = \"bySessionId\", MessageTextFieldName extends FieldPaths<NamedTableInfo<DataModel, TableName>> = \"message\", InsertMutation extends FunctionReference<\"mutation\", \"internal\", {\n    table: string;\n    document: object;\n}> = any, LookupQuery extends FunctionReference<\"query\", \"internal\", {\n    table: string;\n    index: string;\n    keyField: string;\n    key: string;\n}, object[]> = any, DeleteManyMutation extends FunctionReference<\"mutation\", \"internal\", {\n    table: string;\n    index: string;\n    keyField: string;\n    key: string;\n}> = any> extends BaseListChatMessageHistory {\n    lc_namespace: string[];\n    private readonly ctx;\n    private readonly sessionId;\n    private readonly table;\n    private readonly index;\n    private readonly sessionIdField;\n    private readonly messageTextFieldName;\n    private readonly insert;\n    private readonly lookup;\n    private readonly deleteMany;\n    constructor(config: ConvexChatMessageHistoryInput<DataModel, TableName, IndexName, SessionIdFieldName, MessageTextFieldName, InsertMutation, LookupQuery, DeleteManyMutation>);\n    getMessages(): Promise<BaseMessage[]>;\n    addMessage(message: BaseMessage): Promise<void>;\n    clear(): Promise<void>;\n}\n//# sourceMappingURL=convex.d.ts.map"],"mappings":"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"}