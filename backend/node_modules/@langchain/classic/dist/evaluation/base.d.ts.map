{"version":3,"file":"base.d.ts","names":["BaseLanguageModelInterface","AgentStep","ChainValues","BaseCallbackConfig","Callbacks","BaseChain","LLMChain","LLMChainInput","LLMEvalChainInput","T","L","EvalOutputType","ExtractLLMCallOptions","LanguageModelInterface","CallOptions","eqSet","Set","Record","LLMEvalChain","EvalChain","RunInput","RunOutput","StringEvaluatorArgs","PairwiseStringEvaluatorArgs","LLMPairwiseStringEvaluatorArgs","LLMTrajectoryEvaluatorArgs","LLMStringEvaluator","Promise","StringEvaluator","PairwiseStringEvaluator","LLMPairwiseStringEvaluator","AgentTrajectoryEvaluator"],"sources":["../../src/evaluation/base.d.ts"],"sourcesContent":["import type { BaseLanguageModelInterface } from \"@langchain/core/language_models/base\";\nimport { AgentStep } from \"@langchain/core/agents\";\nimport { ChainValues } from \"@langchain/core/utils/types\";\nimport { BaseCallbackConfig, Callbacks } from \"@langchain/core/callbacks/manager\";\nimport { BaseChain, LLMChain, LLMChainInput } from \"../chains/index.js\";\n/**\n * Base input for evaluators.\n */\nexport interface LLMEvalChainInput<T extends EvalOutputType = EvalOutputType, L extends BaseLanguageModelInterface = BaseLanguageModelInterface> extends LLMChainInput<T, L> {\n}\nexport type ExtractLLMCallOptions<LanguageModelInterface> = LanguageModelInterface extends BaseLanguageModelInterface<any, infer CallOptions> ? CallOptions : never;\n/**\n * Compare two sets for equality\n *\n * @param xs\n * @param ys\n */\nexport declare const eqSet: (xs: Set<string>, ys: Set<string>) => boolean;\n/**\n * The type of the output of an evaluation evaluator.\n */\nexport type EvalOutputType = Record<string, string | number | boolean>;\n/**\n * Base llm chain class for evaluators.\n */\nexport declare abstract class LLMEvalChain<T extends EvalOutputType = EvalOutputType, L extends BaseLanguageModelInterface = BaseLanguageModelInterface> extends LLMChain<T, L> {\n    requiresInput?: boolean;\n    requiresReference?: boolean;\n    skipInputWarning?: string;\n    skipReferenceWarning?: string;\n    /**\n     * Check if the evaluation arguments are valid.\n     * @param reference  The reference label.\n     * @param input The input string.\n     * @throws {Error} If the evaluator requires an input string but none is provided, or if the evaluator requires a reference label but none is provided.\n     */\n    checkEvaluationArgs(reference?: string, input?: string): void;\n}\n/**\n * Base chain class for evaluators.\n */\nexport declare abstract class EvalChain<RunInput extends ChainValues = ChainValues, RunOutput extends ChainValues = ChainValues> extends BaseChain<RunInput, RunOutput> {\n    requiresInput?: boolean;\n    requiresReference?: boolean;\n    skipInputWarning?: string;\n    skipReferenceWarning?: string;\n    /**\n     * Check if the evaluation arguments are valid.\n     * @param reference  The reference label.\n     * @param input The input string.\n     * @throws {Error} If the evaluator requires an input string but none is provided, or if the evaluator requires a reference label but none is provided.\n     */\n    checkEvaluationArgs(reference?: string, input?: string): void;\n}\n/**\n * @field prediction The output string from the  model.\n * @field reference The expected output / reference string.\n * @field input The input string.\n */\nexport interface StringEvaluatorArgs {\n    prediction: string;\n    reference?: string;\n    input?: string;\n}\n/**\n * @field prediction The output string from the first model.\n * @field predictionB The output string from the second model.\n */\nexport interface PairwiseStringEvaluatorArgs {\n    prediction: string;\n    predictionB: string;\n}\n/**\n * @field The input string.\n * @field prediction The output string from the first model.\n * @field predictionB The output string from the second model.\n * @field reference The expected output / reference string.\n */\nexport interface LLMPairwiseStringEvaluatorArgs {\n    input: string;\n    prediction: string;\n    predictionB: string;\n    reference?: string;\n}\n/**\n * Args for AgentTrajectoryEvaluator\n * @field input The input to the agent.\n * @field prediction The final predicted response.\n * @field reference The reference answer.\n * @field agentTrajectory  The intermediate steps forming the agent trajectory.\n */\nexport interface LLMTrajectoryEvaluatorArgs {\n    input: string;\n    prediction: string;\n    reference?: string;\n    agentTrajectory: AgentStep[];\n}\n/**\n * Grade, tag, or otherwise evaluate predictions relative to their inputs\n * and/or reference labels\n */\nexport declare abstract class LLMStringEvaluator<T extends EvalOutputType = EvalOutputType, L extends BaseLanguageModelInterface = BaseLanguageModelInterface> extends LLMEvalChain<T, L> {\n    /**\n     * The name of the evaluation.\n     */\n    evaluationName?: string;\n    /**\n     * Evaluate Chain or LLM output, based on optional input and label.\n     * @returns The evaluation results containing the score or value. It is recommended that the dictionary contain the following keys:\n     * - score: the score of the evaluation, if applicable.\n     * - value: the string value of the evaluation, if applicable.\n     * - reasoning: the reasoning for the evaluation, if applicable.\n     * @param args\n     * @param callOptions\n     * @param config\n     */\n    abstract _evaluateStrings(args: StringEvaluatorArgs & ExtractLLMCallOptions<this[\"llm\"]>, config?: Callbacks | BaseCallbackConfig): Promise<ChainValues>;\n    /**\n     * Evaluate Chain or LLM output, based on optional input and label.\n     * @returns The evaluation results containing the score or value. It is recommended that the dictionary contain the following keys:\n     * - score: the score of the evaluation, if applicable.\n     * - value: the string value of the evaluation, if applicable.\n     * - reasoning: the reasoning for the evaluation, if applicable.\n     * @param args\n     * @param callOptions\n     * @param config\n     */\n    evaluateStrings(args: StringEvaluatorArgs & ExtractLLMCallOptions<this[\"llm\"]>, config?: Callbacks | BaseCallbackConfig): Promise<ChainValues>;\n}\n/**\n * Grade, tag, or otherwise evaluate predictions relative to their inputs\n * and/or reference labels\n */\nexport declare abstract class StringEvaluator extends EvalChain {\n    /**\n     * The name of the evaluation.\n     */\n    evaluationName?: string;\n    /**\n     * Evaluate Chain or LLM output, based on optional input and label.\n     * @returns The evaluation results containing the score or value. It is recommended that the dictionary contain the following keys:\n     * - score: the score of the evaluation, if applicable.\n     * - value: the string value of the evaluation, if applicable.\n     * - reasoning: the reasoning for the evaluation, if applicable.\n     * @param args\n     * @param config\n     */\n    abstract _evaluateStrings(args: StringEvaluatorArgs, config?: Callbacks | BaseCallbackConfig): Promise<ChainValues>;\n    /**\n     * Evaluate Chain or LLM output, based on optional input and label.\n     * @returns The evaluation results containing the score or value. It is recommended that the dictionary contain the following keys:\n     * - score: the score of the evaluation, if applicable.\n     * - value: the string value of the evaluation, if applicable.\n     * - reasoning: the reasoning for the evaluation, if applicable.\n     * @param args\n     * @param config\n     */\n    evaluateStrings(args: StringEvaluatorArgs, config?: Callbacks | BaseCallbackConfig): Promise<ChainValues>;\n}\n/**\n * Compare the output of two models (or two outputs of the same model).\n */\nexport declare abstract class PairwiseStringEvaluator extends EvalChain {\n    /**\n     * The name of the evaluation.\n     */\n    evaluationName?: string;\n    /**\n     * Evaluate the output string pairs.\n     * @param args\n     * @param config\n     * @return A dictionary containing the preference, scores, and/or other information.\n     */\n    abstract _evaluateStringPairs(args: PairwiseStringEvaluatorArgs, config?: Callbacks | BaseCallbackConfig): Promise<ChainValues>;\n    /**\n     * Evaluate the output string pairs.\n     * @param args\n     * @param config\n     * @return A dictionary containing the preference, scores, and/or other information.\n     */\n    evaluateStringPairs(args: PairwiseStringEvaluatorArgs, config?: Callbacks | BaseCallbackConfig): Promise<ChainValues>;\n}\n/**\n * Compare the output of two models (or two outputs of the same model).\n */\nexport declare abstract class LLMPairwiseStringEvaluator extends LLMEvalChain {\n    /**\n     * The name of the evaluation.\n     */\n    evaluationName?: string;\n    /**\n     * Evaluate the output string pairs.\n     * @param args\n     * @param callOptions\n     * @param config\n     * @return A dictionary containing the preference, scores, and/or other information.\n     */\n    abstract _evaluateStringPairs(args: LLMPairwiseStringEvaluatorArgs, callOptions?: ExtractLLMCallOptions<this[\"llm\"]>, config?: Callbacks | BaseCallbackConfig): Promise<ChainValues>;\n    /**\n     * Evaluate the output string pairs.\n     * @param args\n     * @param callOptions\n     * @param config\n     * @return A dictionary containing the preference, scores, and/or other information.\n     */\n    evaluateStringPairs(args: LLMPairwiseStringEvaluatorArgs, callOptions?: ExtractLLMCallOptions<this[\"llm\"]>, config?: Callbacks | BaseCallbackConfig): Promise<ChainValues>;\n}\n/**\n * Interface for evaluating agent trajectories.\n */\nexport declare abstract class AgentTrajectoryEvaluator extends LLMEvalChain {\n    requiresInput: boolean;\n    /**\n     * The name of the evaluation.\n     */\n    evaluationName?: string;\n    /**\n     * Evaluate a trajectory.\n     * @return The evaluation result.\n     * @param args\n     * @param callOptions\n     * @param config\n     */\n    abstract _evaluateAgentTrajectory(args: LLMTrajectoryEvaluatorArgs, callOptions?: ExtractLLMCallOptions<this[\"llm\"]>, config?: Callbacks | BaseCallbackConfig): Promise<ChainValues>;\n    /**\n     * Evaluate a trajectory.\n     * @return The evaluation result.\n     * @param args\n     * @param callOptions\n     * @param config\n     */\n    evaluateAgentTrajectory(args: LLMTrajectoryEvaluatorArgs, callOptions?: ExtractLLMCallOptions<this[\"llm\"]>, config?: Callbacks | BaseCallbackConfig): Promise<ChainValues>;\n}\n//# sourceMappingURL=base.d.ts.map"],"mappings":"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"}